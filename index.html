<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="https://brand.mouseless.codes/assets/css/default.css">
        <style>
          #exhibition-space {
            border: 0;
            display: block;
            width: 100%;
            height: calc(100vh - 5em);
          }
          .buttons {
            display: flex;
            gap: var(--space-xs);
          }
          button {
            cursor: pointer;
          }
        </style>
    </head>
    <body>
      <span class="c--fg_gray-0">&gt; <span id="piece-name"></span>_</span>
      <iframe id="exhibition-space"></iframe>
      <div class="buttons s--p_xs">
        <button id="prev-button" class="s--ph_sm c--bg_darkgreen-p3 c--fg_gray-0">&lt;&lt;</button>
        <button id="next-button" class="s--ph_sm c--bg_darkgreen-p3 c--fg_gray-0">&gt;&gt;</button>
      </div>
    </body>
    <script type="module">
      const postsUrl = `./posts.json?v=${Math.random()}`;
      const postsResponse = await fetch(postsUrl);
      const posts = await postsResponse.json();

      const pieceName = document.getElementById("piece-name");
      const exhibitionSpace = document.getElementById("exhibition-space");
      const prevButton = document.getElementById("prev-button");
      const nextButton = document.getElementById("next-button");

      prevButton.onclick = prev;
      nextButton.onclick = next;

      let index = posts.length - 1;
      show();

      function prev() {
        index++;
        show();
      }

      function next() {
        index--;
        show();
      }

      function show() {
        pieceName.innerText = posts[index];
        exhibitionSpace.src = posts[index];

        nextButton.style.visibility = index <= 0 ? "hidden" : "visible";
        prevButton.style.visibility = index >= posts.length - 1 ? "hidden" : "visible";
      }
    </script>
</html>
